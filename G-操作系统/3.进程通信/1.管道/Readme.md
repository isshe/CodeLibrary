
[TOC]

# 管道

* 管道的局限性
    * 半双工：数据只能在一个方向上流动；
    * 只能在具有共同祖先的两个进程间使用。
    
* 相关函数
```c
#include <unistd.h>

int pipe(int fd[2]);
```
* fd[0]为读而打开；
* fd[1]为写而打开；
* fd[1]的输出是fd[0]的输入；【？！】
* `PIPE_BUF`规定内核的管道缓冲区的大小。
    * `pathconf`及`fpathconf`可以确定PIPE_BUF的值。

* 当管道的一端被关闭后，适用的规则：
    * 当读(read)一个写端被关闭的管道，在所有数据被读取后，read返回0；
    * 当写(write)一个读端被关闭的管道，则产生信号`SIGPIPE`。
        * 忽略/捕捉信号并从信号处理程序返回后，write返回-1，errno=EPIPE。


# A. 疑问
* fa[1]的输出是fd[0]的输入？